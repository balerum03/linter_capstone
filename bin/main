#!/usr/bin/env ruby

require 'colorize'
require_relative '../lib/checker.rb'

arg_to_check = [[/\(/, /\)/], [/\[/, /\]/], [/\{/, /\}/]]

checker = Checker.new(ARGV.first)

$flag = []

def print_result(result_array, checking)
  if result_array.empty?
    $flag << 1
  else
    result_array.each do |x|
      puts "There is something wrong with #{ checking } in line #{ x + 1 }".colorize(:red)
    end
  end
end

error_index = checker.file_checker(arg_to_check[0][0], arg_to_check[0][1])
print_result(error_index, 'parenthesis')
error_index = checker.file_checker(arg_to_check[1][0], arg_to_check[1][1])
print_result(error_index, 'Square brakets')
error_index = checker.file_checker(arg_to_check[2][0], arg_to_check[2][1])
print_result(error_index, 'curly brakets')

puts 'There were no errors found in your code.'.colorize(:green) if $flag.length == 3